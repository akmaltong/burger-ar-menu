<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AR Burger Menu</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #000; 
            font-family: Arial, sans-serif;
        }
        
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .menu {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            pointer-events: auto;
        }
        
        .menu h1 {
            margin: 0 0 10px 0;
            color: #ff6b6b;
            font-size: 24px;
        }
        
        .burger-selector {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .burger-btn {
            padding: 10px 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            pointer-events: auto;
        }
        
        .burger-btn:hover {
            background: #ff5252;
        }
        
        .burger-btn.active {
            background: #4CAF50;
        }
        
        .controls {
            position: absolute; 
            bottom: 25px; 
            left: 50%; 
            transform: translateX(-50%);
            z-index: 100; 
            display: flex; 
            gap: 10px;
            pointer-events: auto;
        }
        
        button {
            padding: 15px 20px; 
            font-size: 16px; 
            border-radius: 12px; 
            border: 2px solid #fff;
            background: rgba(0,0,0,0.8); 
            color: white; 
            font-weight: bold;
            cursor: pointer;
        }
        
        button:hover {
            background: rgba(50,50,50,0.8);
        }
        
        .instructions {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 14px;
            max-width: 80%;
        }
    </style>
</head>

<body>
    <div class="ui-overlay">
        <div class="menu">
            <h1>üçî AR –ú–µ–Ω—é –ë—É—Ä–≥–µ—Ä–æ–≤</h1>
            <div class="burger-selector">
                <button class="burger-btn active" onclick="loadBurger('classic')">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π</button>
                <button class="burger-btn" onclick="loadBurger('cheese')">–ß–∏–∑–±—É—Ä–≥–µ—Ä</button>
                <button class="burger-btn" onclick="loadBurger('bacon')">–ë–µ–∫–æ–Ω –î–µ–ª—é–∫—Å</button>
                <button class="burger-btn" onclick="loadBurger('veggie')">–í–µ–≥–≥–∏</button>
                <button class="burger-btn" onclick="loadBurger('double')">–î–≤–æ–π–Ω–∞—è –ü–æ—Ä—Ü–∏—è</button>
            </div>
        </div>
        
        <div class="instructions">
            –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä Hiro –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è 3D –±—É—Ä–≥–µ—Ä–∞
        </div>
        
        <div class="controls">
            <button onclick="resize(1.2)">–ë–æ–ª—å—à–µ +</button>
            <button onclick="resize(0.8)">–ú–µ–Ω—å—à–µ -</button>
            <button onclick="rotateBurger()">–ü–æ–≤–µ—Ä–Ω—É—Ç—å</button>
        </div>
    </div>

    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false; trackingMethod: best; smooth: true;"
        renderer="logarithmicDepthBuffer: true; antialias: true; precision: high; colorManagement: true;">
        
        <a-marker id="main-marker" preset="hiro" smooth="true">
            <a-entity light="type: ambient; intensity: 1.5;"></a-entity>
            <a-entity light="type: directional; intensity: 1.5;" position="1 4 3"></a-entity>

            <a-entity
                id="current-burger"
                gltf-model=""
                scale="0.08 0.08 0.08" 
                position="0 0 0"
                rotation="0 0 0"
                animation-mixer="timeScale: 0">
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        let currentBurger = 'classic';
        let rotation = 0;
        
        // –ö–∞—Ä—Ç–∞ –±—É—Ä–≥–µ—Ä–æ–≤ –∫ GLB —Ñ–∞–π–ª–∞–º
        const burgerModels = {
            'classic': './models/glb/classic-burger.glb',
            'cheese': './models/glb/cheese-burger.glb', 
            'bacon': './models/glb/bacon-burger.glb',
            'veggie': './models/glb/veggie-burger.glb',
            'double': './models/glb/double-burger.glb'
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –±—É—Ä–≥–µ—Ä–∞
        function loadBurger(type) {
            currentBurger = type;
            const burgerEntity = document.querySelector('#current-burger');
            
            if (burgerEntity) {
                burgerEntity.setAttribute('gltf-model', burgerModels[type]);
                
                // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
                document.querySelectorAll('.burger-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω –±—É—Ä–≥–µ—Ä: ${type}`);
            }
        }

        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
        function resize(factor) {
            const el = document.querySelector('#current-burger');
            if (el) {
                const s = el.getAttribute('scale');
                el.setAttribute('scale', {
                    x: s.x * factor, 
                    y: s.y * factor, 
                    z: s.z * factor
                });
            }
        }

        // –ü–æ–≤–æ—Ä–æ—Ç
        function rotateBurger() {
            rotation += 45;
            const el = document.querySelector('#current-burger');
            if (el) {
                el.setAttribute('rotation', {x: 0, y: rotation, z: 0});
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
        document.querySelector('#current-burger').addEventListener('model-loaded', function () {
            if (this.components['animation-mixer']) {
                this.components['animation-mixer'].stop();
            }
            console.log("3D –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞");
        });

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–∞—Å–∞–Ω–∏–∏
        window.addEventListener('touchstart', function () {
            const video = document.querySelector('#arjs-video');
            if (video) {
                video.play().catch(e => console.log('–í–∏–¥–µ–æ —É–∂–µ –∏–≥—Ä–∞–µ—Ç'));
            }
        });

        // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ - –∫–ª–∏–∫ –º—ã—à–∏
        window.addEventListener('click', function () {
            const video = document.querySelector('#arjs-video');
            if (video) {
                video.play().catch(e => console.log('–í–∏–¥–µ–æ —É–∂–µ –∏–≥—Ä–∞–µ—Ç'));
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –±—É—Ä–≥–µ—Ä–∞
        window.addEventListener('load', function() {
            loadBurger('classic');
        });
    </script>
</body>
</html>